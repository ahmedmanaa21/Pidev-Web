<section>
    <div class="container">
        <h1>Gestion Admins</h1>
<table class="table">
    <thead>
    <tr>
        <th>Id</th>
        <th>Nom</th>
        <th>Prenom</th>
        <th>Email</th>
        <th>Numero telephone</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    {% for admin in admins %}
        <tr>
            <td>{{ admin.id }}</td>
            <td>{{ admin.nom }}</td>
            <td>{{ admin.prenom }}</td>
            <td>{{ admin.email }}</td>
            <td>{{ admin.numtel }}</td>
            <td>
                <a class="btn btn-danger btn-icon-text" href="{{ path('app_admins_show', {'id': admin.id}) }}">show</a>
                <a class="btn btn-dark btn-icon-text" href="{{ path('app_admins_edit', {'id': admin.id}) }}">edit</a>
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="7">no records found</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{{ knp_pagination_render(admins) }}


<div class="form-group text-center">
    <a class="btn btn-dark btn-icon-text" href="{{ path('app_admins_new') }}">Add new</a>
</div>
</div>
</section>
<div class="container" id="all">
    {% include 'admins/adminAjax.html.twig' %}
</div>
<br>
<script src="{{ asset('assets/js/jquery.js') }}"></script>
<script
        src="{{ asset('https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js')}}">
</script>
<form>
    <div class="container">
        <div class="input-group">
            <input type="text" id="search" class="form-control bg-light border-1 " placeholder="Search for..."
                   aria-label="Search" aria-describedby="basic-addon2">
            <div class="input-group-append">

            </div>
        </div>
    </div>
</form>


<script>
    $( document ).ready(function() {
        var currentRequest = null;
        $("#search").keyup(function(e){
            /* La variable value va prendre la valeur insérer dans le champ de texte
            afin d’effectuer la recherche */
            var value = $(this).val();
            if(currentRequest != null) {
                currentRequest.abort();
            }
            /* Ajax est lancé lors du remplissage du champ texte dont l’id est
            « search » pour faire la recherche */
            currentRequest = $.ajax({
                url : "{{ path('adminAjax') }}",
                type : 'GET',
                data: {
                    'searchValue' : value
                },
                success : function(retour)
                {
                    $('#all').html(retour);
                },
            });
            return false;
        });
    });
</script>

